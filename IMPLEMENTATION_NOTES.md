# ๐ ุชุญุฏูุซุงุช ุงููุธุงู - 20 ููุงูุฑ 2026

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ุงูููููุฐุฉ

### 1๏ธโฃ ูุธุงู ุงูุชุญูู ูู ุฃููููุฉ ุธููุฑ ุงููุฑุงูุฒ (Display Priority System)

#### ๐ ุงููุตู
ุชูููู Super Admin ูู ุงูุชุญูู ุงููุฏูู ูู ุชุฑุชูุจ ุธููุฑ ุงููุฑุงูุฒ ูู ุตูุญุฉ Searchุ ูุน ุถูุงู ุธููุฑ ุงููุฑุงูุฒ ุฐุงุช ุงูุฃููููุฉ ูู ุงูุฃุนูู.

#### ๐ง ุงูุชุบููุฑุงุช ุงูุชูููุฉ

##### 1. **Firestore Schema**
ุชู ุฅุถุงูุฉ ุญูู ุฌุฏูุฏ ููู ูุฑูุฒ:
```typescript
displayPriority: number | null
```
- `null` = ูุง ุชูุฌุฏ ุฃููููุฉ (ูุธูุฑ ุจุนุฏ ุงููุฑุงูุฒ ุฐุงุช ุงูุฃููููุฉ)
- `1, 2, 3, ...` = ุฑูู ุงูุฃููููุฉ (ุฃูู ุฑูู = ุฃุนูู ุฃููููุฉ)

##### 2. **ูููุงุช ุชู ุชุญุฏูุซูุง**

**`src/stores/centersStore.ts`**
- โ ุฅุถุงูุฉ ุญูู `displayPriority?: number | null` ูููุงุฌูุฉ `Center`

**`src/hooks/useCentersWithPagination.ts`**
- โ ุชุญุฏูุซ ููุทู ุงูุชุฑุชูุจ:
  1. ุงููุฑุงูุฒ ุฐุงุช `displayPriority` ุชุธูุฑ ุฃููุงู (ูุฑุชุจุฉ ุชุตุงุนุฏูุงู)
  2. ุงููุฑุงูุฒ ุจุฏูู `displayPriority` ุชุธูุฑ ุจุนุฏูุง (ูุฑุชุจุฉ ุญุณุจ `createdAt`)

**`src/components/admin/CentersManagement.tsx`**
- โ ุฅุถุงูุฉ ุนููุฏ "ุฃููููุฉ ุงูุธููุฑ" ูู ุฌุฏูู ุงููุฑุงูุฒ
- โ ุฒุฑ ุชุนุฏูู ุณุฑูุน ูู ูู ุตู
- โ ุฎูุงุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ (Dropdown Menu)
- โ Dialog ูุงูู ูุฅุฏุงุฑุฉ ุงูุฃููููุฉ ูุน:
  - Validation ูููุน ุงูุฃุฑูุงู ุงูููุฑุฑุฉ
  - Validation ููุฃุฑูุงู ุงูุตุญูุญุฉ ุงูููุฌุจุฉ ููุท
  - ุฅููุงููุฉ ุฅูุบุงุก ุงูุฃููููุฉ (ุชุนููู `null`)
  - ุฑุณุงุฆู ุชูุถูุญูุฉ ูููุณุชุฎุฏู

##### 3. **ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ**

```typescript
// State Management
const [isPriorityDialogOpen, setIsPriorityDialogOpen] = useState(false);
const [priorityForm, setPriorityForm] = useState<{ priority: number | null }>({ priority: null });

// Handler ูุน Validation ูุงูู
const handleUpdatePriority = async () => {
  // โ Check for duplicates
  // โ Validate positive integer
  // โ Update Firestore
  // โ Show success/error toast
}
```

#### ๐ ุณููู ุงููุธุงู

##### ุชุฑุชูุจ ุงููุฑุงูุฒ ูู ุตูุญุฉ Search:
```
1๏ธโฃ ูุฑูุฒ A (displayPriority = 1)
2๏ธโฃ ูุฑูุฒ B (displayPriority = 2)
3๏ธโฃ ูุฑูุฒ C (displayPriority = 5)
---
4๏ธโฃ ูุฑูุฒ D (displayPriority = null) - ุงูุฃุญุฏุซ
5๏ธโฃ ูุฑูุฒ E (displayPriority = null) - ุงููุฏูู
```

##### ุงูููุงุนุฏ:
- โ **ูุง ููุณูุญ ุจุชูุฑุงุฑ** ููุณ ุฑูู ุงูุฃููููุฉ
- โ **ููุท Super Admin** ููููู ุฑุคูุฉ ูุชุนุฏูู ุงูุฃููููุฉ
- โ **ูุง Firestore Reads ุฅุถุงููุฉ** - ุงูุชุญุฏูุซ client-side

#### ๐ฏ Acceptance Criteria ุงููููุฌุฒุฉ
- โ ูููู ุชุญุฏูุฏ ุฃููููุฉ ุฑูููุฉ ููู ูุฑูุฒ
- โ ุงููุฑุงูุฒ ุชุธูุฑ ูู Search ุญุณุจ ุงูุฃููููุฉ
- โ ุงููุฑุงูุฒ ุจุฏูู ุฃููููุฉ ุชุธูุฑ ุจุนุฏูู ุชููุงุฆูุงู
- โ ูุง ููุฌุฏ ุชุฑุชูุจ ุนุดูุงุฆู
- โ ูุง ูุญุฏุซ ุชุนุงุฑุถ ูู ุงูุฃุฑูุงู
- โ ุงูุฃุฏุงุก ูุณุชูุฑ ููุง ููุฌุฏ ุฒูุงุฏุฉ ูู Reads

---

### 2๏ธโฃ ุชุญุณูู ุฌุฏูู ุงูุญุตุต ุงูุฃุณุจูุนู (Enhanced Weekly Calendar)

#### ๐ ุงููุตู
ุฅุนุงุฏุฉ ุชุตููู ูุงููุฉ ููููู `TimetableCalendar` ููุตุจุญ ุฃุณุจูุนู ูุญุถ ูุน ุชูููุฏ ูุทุงู ุงูุชููู ุงูุฒููู ูุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู.

#### ๐ง ุงูุชุบููุฑุงุช ุงูุชูููุฉ

##### 1. **ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**

**โจ ุชูููุฏ ูุทุงู ุงูุชููู (Time Range Constraint)**
```typescript
// ุญุณุงุจ ุงููุทุงู ุงูุฒููู ุจูุงุกู ุนูู ุงูุญุตุต ุงููุนููุฉ
const { minDate, maxDate } = useMemo(() => {
  // For recurring sessions: use startDateTime โ endDateTime
  // For single sessions: use startDateTime only
  // ุงููุชูุฌุฉ: ูุทุงู ุฒููู ุฏููู ุจุฏูู ุฃุณุงุจูุน ูุงุฑุบุฉ
}, [sessions]);

const minWeek = 0;
const maxWeek = getWeekNumber(maxDate);
```

**๐จ ุชูููู ุญุณุจ ุงูุตู ุงูุฏุฑุงุณู**
```typescript
const gradeColors: Record<string, string> = {
  "ุงูุตู ุงูุฃูู ุงูุงุจุชุฏุงุฆู": "bg-blue-500",
  "ุงูุตู ุงูุซุงูู ุงูุงุจุชุฏุงุฆู": "bg-cyan-500",
  "ุงูุตู ุงูุซุงูุซ ุงูุงุจุชุฏุงุฆู": "bg-teal-500",
  // ... 12 ููู ุซุงุจุช ููู ุงูุตููู
};
```

**๐ ุชุตููุฉ ุญุณุจ ุงูุตู (Client-Side)**
```typescript
const [selectedGrade, setSelectedGrade] = useState<string>("all");

const filteredSessions = useMemo(() => {
  return sessions.filter(session => {
    // โ Grade filter
    if (selectedGrade !== "all" && session.grade !== selectedGrade) {
      return false;
    }
    
    // โ Week filter for recurring/single sessions
    // ...
  });
}, [sessions, selectedGrade, currentWeek]);
```

**๐ ุฏุนู ุงูุญุตุต ุงูุฃุณุจูุนูุฉ ูุงููุฑุฏูุฉ**
- **Recurring Sessions**: ุชุธูุฑ ููุท ุจูู `startDateTime` ู `endDateTime`
- **Single Sessions**: ุชุธูุฑ ูู ุงูุฃุณุจูุน ุงูุฐู ุชูุน ููู ููุท
- ุนุฑุถ ูุฏุฉ ุงูุงุณุชูุฑุงุฑ ููุญุตุต ุงูุฃุณุจูุนูุฉ: `"ุญุชู 15 ูุจุฑุงูุฑ 2026"`

**๐ฑ Responsive Design ุงููุงูู**
- **Desktop**: ุนุฑุถ ุฃุณุจูุน ูุงูู ุจุชูุงุตูู ูุงุถุญุฉ
- **Tablet**: ุนุฑุถ ูุถุบูุท ูุน ุญุฌู ุฎุท ูุชูุณุท
- **Mobile**: 
  - Horizontal scroll ุณูุณ
  - ุฃุฒุฑุงุฑ ุชููู ูุงุถุญุฉ
  - ุฃุณูุงุก ุงูุฃูุงู ูุฎุชุตุฑุฉ (ุงูุณุจุช โ ุงูุณุจ)

##### 2. **ุงูุชุญุณููุงุช ูู UX**

**๐ซ ููุน ุงูุชููู ุฎุงุฑุฌ ุงููุทุงู**
```typescript
const canGoPrevious = currentWeek > minWeek;
const canGoNext = currentWeek < maxWeek;

// ุชุนุทูู ุงูุฃุฒุฑุงุฑ ุนูุฏ ุงููุตูู ููุญุฏูุฏ
<Button disabled={!canGoPrevious} onClick={handlePreviousWeek} />
<Button disabled={!canGoNext} onClick={handleNextWeek} />
```

**๐ Empty States ูุงุถุญุฉ**
- ุญุงูุฉ ุนุฏู ูุฌูุฏ ุญุตุต ุนูู ุงูุฅุทูุงู
- ุญุงูุฉ ุนุฏู ูุฌูุฏ ุญุตุต ูู ุงูุฃุณุจูุน ุงูุญุงูู
- ุญุงูุฉ ุนุฏู ูุฌูุฏ ุญุตุต ููุตู ุงูููุฎุชุงุฑ

**๐ฏ ุนุฑุถ ูุนูููุงุช ูููุฏุฉ**
```typescript
// ูู header
{formatWeekDisplay()} // "15/1 - 21/1/2026"

// ูู ูู ุญุตุฉ ุฃุณุจูุนูุฉ
<div className="text-[10px] opacity-50">
  ุญุชู {endDate}
</div>
```

##### 3. **ุงูููู ุงูููุนุงุฏ ูุชุงุจุชู ุจุงููุงูู**

**`src/components/centers/TimetableCalendar.tsx`**

**ุงูุญุฌู**: 
- ูุจู: ~256 ุณุทุฑ
- ุจุนุฏ: ~500+ ุณุทุฑ (ูุน ุฌููุน ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ)

**ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ**:
1. โ ุนุฑุถ ุฃุณุจูุนู ููุท
2. โ ุชูููุฏ ูุทุงู ุฒููู
3. โ ุชุตููุฉ ุญุณุจ ุงูุตู
4. โ ุชูููู ุญุณุจ ุงูุตู (12 ููู)
5. โ ุฏุนู recurring & single sessions
6. โ ุนุฑุถ ูุฏุฉ ุงูุงุณุชูุฑุงุฑ
7. โ Responsive 100%
8. โ Empty states
9. โ Legend ููุฃููุงู
10. โ Week navigation ูุญุฏุฏ

#### ๐ ุณููู ุงููุธุงู

##### ูุซุงู ุนูู ุงูุชููู:
```
ุฃูุฏู ุญุตุฉ: 1 ููุงูุฑ 2026
ุฃุญุฏุซ ุญุตุฉ: 28 ูุจุฑุงูุฑ 2026

โ ูููู ุงูุชููู: ูู ุฃุณุจูุน 1/1 โ 28/2
โ ูุง ูููู ุงูุชููู: ูุจู 1/1 ุฃู ุจุนุฏ 28/2
๐ ุงูุฃุฒุฑุงุฑ ุชูุนุทูู ุชููุงุฆูุงู ุนูุฏ ุงูุญุฏูุฏ
```

##### ูุซุงู ุนูู ุงูุชุตููุฉ:
```
User selects: "ุงูุตู ุงูุซุงูู ุงูุซุงููู"

Result:
โ ุชุธูุฑ ููุท ุญุตุต ุงูุตู ุงูุซุงูู ุงูุซุงููู
โ ุจููู purple-500
โ ุจุฏูู ุฃู Firebase Reads ุฅุถุงููุฉ
```

#### ๐ฏ Acceptance Criteria ุงููููุฌุฒุฉ
- โ Calendar ุฃุณุจูุนู ููุท
- โ ูุง ููุฌุฏ ุชููู ุดูุฑู ุฃู ุณููู
- โ ุงูุชููู ูุญุฏูุฏ ุจุขุฎุฑ ููุนุฏ ุญุตุฉ ูุนูู
- โ ุฏุนู ุงูุญุตุต ุงูุฃุณุจูุนูุฉ ูุงููุฑุฏูุฉ
- โ ุชูููู ุญุณุจ ุงูุตู ุงูุฏุฑุงุณู
- โ ุชุตููุฉ ุจุฏูู Reads ุฅุถุงููุฉ
- โ ูุชุฌุงูุจ 100% ูุน ูู ุงูุดุงุดุงุช
- โ ุชุฌุฑุจุฉ ุงุณุชุฎุฏุงู ูุงุถุญุฉ ูุณูุณุฉ

---

## ๐งช Testing Checklist

### Display Priority System
- [ ] ุฌุฑุจ ุชุนููู ุฃููููุฉ ููุฑูุฒ ูู Admin Dashboard
- [ ] ุชุญูู ูู ุนุฏู ุงูุณูุงุญ ุจุฃุฑูุงู ููุฑุฑุฉ
- [ ] ุฌุฑุจ ุฅูุบุงุก ุฃููููุฉ (null)
- [ ] ุชุญูู ูู ุงูุชุฑุชูุจ ุงูุตุญูุญ ูู ุตูุญุฉ Search
- [ ] ุฌุฑุจ ูุน ูุฑุงูุฒ ุจุฏูู ุฃููููุฉ

### Weekly Calendar
- [ ] ุฌุฑุจ ุงูุชููู ุจูู ุงูุฃุณุงุจูุน
- [ ] ุชุญูู ูู ุชุนุทูู ุงูุฃุฒุฑุงุฑ ุนูุฏ ุงูุญุฏูุฏ
- [ ] ุฌุฑุจ ุชุตููุฉ ุญุณุจ ุงูุตู
- [ ] ุชุญูู ูู ุธููุฑ ุงูุญุตุต ุงูุฃุณุจูุนูุฉ ููุท ูู ูุทุงููุง
- [ ] ุชุญูู ูู ุธููุฑ ุงูุญุตุต ุงููุฑุฏูุฉ ูู ุฃุณุจูุนูุง ููุท
- [ ] ุฌุฑุจ ุนูู Mobile/Tablet/Desktop
- [ ] ุชุญูู ูู Empty States

---

## ๐ ููุงุญุธุงุช ุชูููุฉ

### Performance
- โ **ูุง ุชูุฌุฏ Firebase Reads ุฅุถุงููุฉ** 
  - Display Priority: ูุชู ุงูุชุฑุชูุจ client-side
  - Calendar Filtering: ูุชู ุงูุชุตููุฉ client-side
  
- โ **State Management ูุญุณูู**
  - ุงุณุชุฎุฏุงู `useMemo` ููุนูููุงุช ุงูุซูููุฉ
  - Re-renders ูุญุฏูุฏุฉ ููุท ุนูุฏ ุงูุญุงุฌุฉ

### Browser Compatibility
- โ ุฌููุน ุงูููุฒุงุช ูุชูุงููุฉ ูุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
- โ Fallbacks ููุงุณุจุฉ ููุจูุงูุงุช ุงููุฏููุฉ

### Mobile Experience
- โ Touch-friendly buttons
- โ Smooth scrolling
- โ Optimized text sizes

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ

### Display Priority
1. **Drag & Drop** ูุชุฑุชูุจ ุงููุฑุงูุฒ ุจุตุฑูุงู
2. **Bulk Actions** ูุชุนููู ุฃููููุงุช ูุชุนุฏุฏุฉ
3. **Presets** (ูููุฒ - ุฅุนูุงู - ุนุงุฏู)
4. **Temporary Priority** (ุฃููููุฉ ูุคูุชุฉ ุจุชุงุฑูุฎ ุงูุชูุงุก)

### Weekly Calendar
1. **Highlight ุงูุฃุณุจูุน ุงูุญุงูู** ุจุญุฏูุฏ ููููุฉ
2. **Tooltips** ุนูุฏ hover ุนูู ุงูุญุตุต
3. **Deep Links** ููุดุงุฑูุฉ ุฃุณุจูุน ูุญุฏุฏ
4. **Print View** ูุทุจุงุนุฉ ุงูุฌุฏูู
5. **Export to PDF/Image**
6. **ุญูุธ ุขุฎุฑ ุฃุณุจูุน** ุชู ุชุตูุญู ูู localStorage

---

## ๐ ุงูุฏุนู ุงูููู
ูู ุญุงูุฉ ูุฌูุฏ ุฃู ูุดุงูู ุฃู ุงุณุชูุณุงุฑุงุชุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: 20 ููุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ**: v2.5.0  
**ุงูุชูุงูู**: React 18+, Firebase 10+, Vite 5+
